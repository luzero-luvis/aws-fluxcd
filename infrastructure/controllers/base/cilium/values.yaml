# =========================================================
# Cilium Helm Values for AWS EKS with ENI mode
# =========================================================

# Kubernetes API server (control plane) endpoint
# Use only the DNS, no https:// prefix
k8sServiceHost: "127.0.0.1"
k8sServicePort: "6443"

# Enable AWS ENI mode for native networking
eni:
  enabled: true
  updateEC2AdapterLimitViaAPI: true
  awsReleaseExcessIPs: true
  gcTags:
    io.cilium/cilium-managed: "true"
    kubernetes.io/cluster/my-cluster: "owned"

# IPAM configuration for ENI mode
ipam:
  mode: "eni"
  operator:
    # Use your VPC CIDR for pod allocation
    clusterPoolIPv4PodCIDRList:
      - "10.0.0.0/16"

# Routing and tunnel mode
routingMode: "native"
tunnelProtocol: ""
autoDirectNodeRoutes: false

# CNI configuration
cni:
  exclusive: true
  chainingMode: "none"

# Enable kube-proxy replacement
kubeProxyReplacement: strict
kubeProxyReplacementHealthzBindAddr: "0.0.0.0:10256"

# Enable host-reachable services for API server â†’ ClusterIP reachability
enableHostReachableServices: true

# Session affinity support
sessionAffinity: true

# IP masquerading and BPF proxy
bpf:
  masquerade: true
  tproxy: true

enableBPFTProxy: true
enableIPv4Masquerade: true
enableIPv6Masquerade: false

# Network policies
k8sNetworkPolicy:
  enabled: true

# Security / encryption (WireGuard optional)
encryption:
  enabled: false

# Health checking
healthChecking: true

# IPv4 native routing CIDR (your VPC CIDR)
ipv4NativeRoutingCIDR: "10.0.0.0/16"

# Hubble observability
hubble:
  enabled: true
  relay:
    enabled: true
  ui:
    enabled: true
  metrics:
    enabled:
      - dns
      - drop
      - tcp
      - flow
      - icmp
      - http

# Operator configuration
operator:
  replicas: 2

# Endpoint routing for better performance
enableEndpointRoutes: true

# Socket load balancing
socketLB:
  enabled: true
  hostNamespaceOnly: false

