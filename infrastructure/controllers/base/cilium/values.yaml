# Cilium 1.18.2 Configuration for AWS EKS
# Install: helm install cilium cilium/cilium --version 1.18.2 -f cilium-values.yaml -n kube-system

# AWS ENI Configuration
eni:
  enabled: true

ipam:
  mode: eni

# Egress Masquerading
egressMasqueradeInterfaces: eth0

# Native Routing (no tunneling)
routingMode: native

endpointRoutes:
  enabled: true

# Replace kube-proxy
kubeProxyReplacement: true

# Kubernetes API Server Configuration
# IMPORTANT: Replace with your actual EKS API endpoint
k8sServiceHost: "70F5A1222EC56EB5FA79F50318312C99.gr7.us-west-2.eks.amazonaws.com"
k8sServicePort: "443"

# Prometheus Metrics
prometheus:
  enabled: true

# Operator Configuration
operator:
  prometheus:
    enabled: true

# Hubble Observability
hubble:
  enabled: true
  
  relay:
    enabled: true
  
  ui:
    enabled: true
  
  metrics:
    enabled:
      - dns
      - drop
      - tcp
      - flow
      - port-distribution
      - icmp
      - "httpV2:exemplars=true;labelsContext=source_ip,source_namespace,source_workload,destination_ip,destination_namespace,destination_workload,traffic_direction"
